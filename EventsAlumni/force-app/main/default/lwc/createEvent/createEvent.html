<template>
	<div if:true={showSpinner}>
		<lightning-spinner alternative-text="Loading..." variant="brand" size="medium">
		</lightning-spinner>
	</div>
	<div class="bgColor">
		<template if:true={isEventSetup}>
			<div class="custom-file-upload ">
				<!--<lightning-file-upload label="Choose a cover photo" name="coverImageURL"
					accept={acceptedFormats} onuploadfinished={handleCoverImageUpload}>
				</lightning-file-upload>
				<div if:true={coverImageURL}>
					<lightning-formatted-url value={coverImageURL} label="Cover Image Url" target="_blank">
					</lightning-formatted-url>
				</div>-->
				<lightning-card title="Image Upload">
                    <div class="slds-m-around_medium">
                        <!-- File input: Visible only when no image is selected -->
                        <template if:true={isFileInputVisible}>
                            <input type="file" accept="image/*" onchange={handleFileChange} />
                        </template>

                        <!-- Display image preview if selected -->
                        <template if:true={imageUrl}>
                            <div class  ="image-preview">
                                <img src={imageUrl} alt="Selected Image" class="slds-image" /><br/>
                                <lightning-button variant="destructive" label="Remove" onclick={removeImage}>
                                </lightning-button>
                            </div>
                        </template>
                    </div>
                </lightning-card>
			</div>
		
			<div class="slds-col slds-large-size_12-of-12">
				<template if:true={eventDetails}>
					<div class="slds-grid slds-wrap">
						<div class="slds-col slds-size_1-of-2 slds-p-around slds-p-top_x-small slds-p-bottom_x-small" style="padding: 0.5rem 1rem;">
							
								<lightning-input label="Event Title" value={eventDetails.eventTitle} onchange={handleInputChange}
									data-id="eventTitle" placeholder="Event Title">
							</lightning-input>
							
						</div>
			
						<div class="slds-col slds-size_1-of-2 slds-p-around slds-p-top_x-small slds-p-bottom_x-small" style="padding: 0.5rem 1rem;">
							<c-event-multi-select-combobox label="Event Type" showpills="true" onselected={handleSelection}
							placeholder={existingEventType} options={parentOptions}></c-event-multi-select-combobox>
						</div>
						<div class="slds-col slds-size_1-of-2 slds-p-around slds-p-top_x-small slds-p-bottom_x-small" style="padding: 0.5rem 1rem;">
							<lightning-input type="number" label="Maximum Number of Participants Allowed" value={eventDetails.maximumNumberOfParticipants}
								data-id="maximumNumberOfParticipants" onchange={handleInputChange}>
							</lightning-input>
						</div>
						<div class="slds-col slds-size_1-of-2 slds-p-around slds-p-top_x-small slds-p-bottom_x-small" style="padding: 0.5rem 1rem;">
							<lightning-input type="date" label="Select Start Date" value={eventDetails.startdate}
								data-id="startdate" onchange={handleInputChange}>
							</lightning-input>
						</div>
						<div class="slds-col slds-size_1-of-2 slds-p-around slds-p-top_x-small slds-p-bottom_x-small" style="padding: 0.5rem 1rem;">
							<lightning-input type="date" label="Select End Date" value={eventDetails.enddate} data-id="enddate"
								onchange={handleInputChange}>
							</lightning-input>
						</div>
						<div class="slds-col slds-size_1-of-2 slds-p-around slds-p-top_x-small slds-p-bottom_x-small" style="padding: 0.5rem 1rem;">
							<lightning-textarea label="Enter Description" value={eventDetails.description} onchange={handleInputChange}
								data-id="description"
								placeholder="Describe your event for the audience. This will be visible on the event page">
							</lightning-textarea>
						</div>
					</div>
				</template>
			</div>
			<div class="custom-flex-container">
				<div class="custom-flex-left">
					<lightning-button class="slds-p-around_xx-small" variant="brand" name="Cancel" label="Cancel"
						onclick={handleCancel}>
					</lightning-button>
				</div>
				<div class="custom-flex">
					<div class="slds-p-around_xx-small">
						<lightning-button variant="brand" label="Save as Draft" onclick={handleSaveAsDraft} style="padding: 0.5rem 1rem;">
						</lightning-button>
					</div>
					<div class="slds-p-around_xx-small">
						<lightning-button variant="brand" type="button" name="save" label="Save and proceed" onclick={handleSave}>
						</lightning-button>
					</div>
				</div>
			</div>
			
		</template>
	</div>
</template>